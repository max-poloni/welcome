<!DOCTYPE html>
<html lang="ru">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-8T173410KK"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-8T173410KK');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</title>
  <link rel="stylesheet" href="styless-main.css">
  <link rel="icon" href="default_favicon.ico" type="image/x-icon">

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –Ω–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã -->
  <script src="scripts/firebase-config.js"></script>
  <script src="scripts/user.js"></script>
  <script src="scripts/games.js"></script>
  <script src="scripts/modals.js"></script>

  <script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ç 100 –¥–æ 500
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ç 100 –¥–æ 500
    function generateRandomUserCount() {
      return Math.floor(Math.random() * (500 - 100 + 1)) + 100; // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —á–∏—Å–ª–æ –æ—Ç 100 –¥–æ 500
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ç 100 –¥–æ 500
    function generateRandomUserCount() {
      return Math.floor(Math.random() * (500 - 100 + 1)) + 100; // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —á–∏—Å–ª–æ –æ—Ç 100 –¥–æ 500
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    function displayUserCount() {
      const totalUsers = generateRandomUserCount();
      document.getElementById('userCount').innerText = `–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: ${totalUsers}`;

      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã
      const gameUserCounts = calculateGameUserCounts(totalUsers);
      console.log('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã:', gameUserCounts); // –û—Ç–ª–∞–¥–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
      updateGameUserDisplays(gameUserCounts);
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã
    function calculateGameUserCounts(totalUsers) {
      const gameUserCounts = [];
      const gameCount = 5; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä

      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –ø–µ—Ä–≤–æ–π –∏–≥—Ä—ã (80%)
      const firstGameUsers = Math.floor(totalUsers * 0.8);
      gameUserCounts.push(firstGameUsers);

      let remainingUsers = totalUsers - firstGameUsers;

      // –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –º–µ–∂–¥—É –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –∏–≥—Ä–∞–º–∏
      for (let i = 1; i < gameCount; i++) {
        const usersForGame = Math.floor(Math.random() * (remainingUsers / (gameCount - i))) + 1;
        gameUserCounts.push(usersForGame);
        remainingUsers -= usersForGame;
      }

      // –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∏–≥—Ä–µ
      gameUserCounts[gameCount - 1] += remainingUsers;

      console.log('–û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã:', gameUserCounts); // –û—Ç–ª–∞–¥–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
      return gameUserCounts;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã
    function updateGameUserDisplays(gameUserCounts) {
      const gameElements = document.querySelectorAll('.game-users');
      gameElements.forEach((element, index) => {
        element.innerText = `–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: ${gameUserCounts[index] || 0}`; // –î–æ–±–∞–≤–ª–µ–Ω–æ —É—Å–ª–æ–≤–∏–µ –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ –∑–∞–¥–∞–Ω–æ
      });
    }

    // –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
    window.onload = function () {
      Promise.all([loadUserData(), loadGames()])
              .then(() => {
                displayUserCount(); // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                console.log('–í—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.');
              })
              .catch((error) => {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö:', error);
              });
    };

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã
    function calculateGameUserCounts(totalUsers) {
      const gameUserCounts = [];
      const gameCount = 5; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä

      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –ø–µ—Ä–≤–æ–π –∏–≥—Ä—ã (80%)
      const firstGameUsers = Math.floor(totalUsers * 0.8);
      gameUserCounts.push(firstGameUsers);

      let remainingUsers = totalUsers - firstGameUsers;

      // –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –º–µ–∂–¥—É –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –∏–≥—Ä–∞–º–∏
      for (let i = 1; i < gameCount; i++) {
        const usersForGame = Math.floor(Math.random() * (remainingUsers / (gameCount - i))) + 1;
        gameUserCounts.push(usersForGame);
        remainingUsers -= usersForGame;
      }

      // –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∏–≥—Ä–µ
      gameUserCounts[gameCount - 1] += remainingUsers;

      return gameUserCounts;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã
    function updateGameUserDisplays(gameUserCounts) {
      const gameElements = document.querySelectorAll('.game-users');
      gameElements.forEach((element, index) => {
        element.innerText = `–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: ${gameUserCounts[index]}`;
      });
    }

    // –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
    window.onload = function () {
      Promise.all([loadUserData(), loadGames()])
              .then(() => {
                displayUserCount(); // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                console.log('–í—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.');
              })
              .catch((error) => {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö:', error);
              });
    };
  </script>
</head>
<body>
<header>
  <h1>Games</h1>
  <div id="username">Username: –ì–æ—Å—Ç—å</div>
  <div id="balance">–ë–∞–ª–∞–Ω—Å: 0 üç∫</div>
  <div id="userCount">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 0</div> <!-- –°—á—ë—Ç—á–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
  <button onclick="openDepositModal()" style="float: right; margin: 10px;">–î–µ–ø</button>
</header>
<main>
  <div class="slider">
    <div class="game" id="game1">
      <img src="game1.jpg" alt="–ò–≥—Ä–∞ 1">
      <div class="game-users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 0</div> <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∏–≥—Ä—ã 1 -->
    </div>
    <div class="game" id="game2">
      <img src="game2.jpg" alt="–ò–≥—Ä–∞ 2">
      <div class="game-users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 0</div> <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∏–≥—Ä—ã 2 -->
    </div>
    <div class="game" id="game3">
      <img src="game3.jpg" alt="–ò–≥—Ä–∞ 3">
      <div class="game-users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 0</div> <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∏–≥—Ä—ã 3 -->
    </div>
    <div class="game" id="game4">
      <img src="game4.jpg" alt="–ò–≥—Ä–∞ 4">
      <div class="game-users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 0</div> <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∏–≥—Ä—ã 4 -->
    </div>
    <div class="game" id="game5">
      <img src="game5.jpg" alt="–ò–≥—Ä–∞ 5">
      <div class="game-users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 0</div> <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∏–≥—Ä—ã 5 -->
    </div>
  </div>
</main>


<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –ø–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—é –±–∞–ª–∞–Ω—Å–∞ -->
<div id="depositModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeDepositModal()">&times;</span>
    <h2>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—é –±–∞–ª–∞–Ω—Å–∞</h2>
    <p>–ß—Ç–æ–±—ã –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:</p>
    <ol class="instruction-list">
      <li><span class="step-number">1.</span> –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è.</li>
      <li><span class="step-number">2.</span> –í—ã–±–µ—Ä–∏—Ç–µ –∂–µ–ª–∞–µ–º—É—é —Å—É–º–º—É –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è.</li>
      <li><span class="step-number">3.</span> –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é.</li>
      <li><span class="step-number">4.</span> –í–∞—à –±–∞–ª–∞–Ω—Å –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω.</li>
    </ol>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∏–≥—Ä -->
<div id="gameModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeGameModal()">&times;</span>
    <div id="modalContent"></div>
  </div>
</div>

</body>
</html>
