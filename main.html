<!DOCTYPE html>
<html lang="ru">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8T173410KK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-8T173410KK');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</title>
    <link rel="stylesheet" href="styless-main.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const firebaseConfig = {
            apiKey: "API_KEY",
            authDomain: "beer-58b91.firebaseapp.com",
            databaseURL: "https://beer-58b91-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "beer-58b91",
            storageBucket: "beer-58b91.appspot.com",
            messagingSenderId: "MESSAGING_SENDER_ID",
            appId: "APP_ID"
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const auth = firebase.auth();

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ localStorage
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ localStorage
        function loadUserData() {
            const username = localStorage.getItem('currentUser'); // –ü–æ–ª—É—á–∞–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ localStorage
            if (username) {
                const userRef = database.ref('users/' + username); // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ –ª–æ–≥–∏–Ω—É

                userRef.once('value').then((snapshot) => {
                    let userData = snapshot.val();
                    if (userData) {
                        // –ï—Å–ª–∏ –±–∞–ª–∞–Ω—Å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –µ–≥–æ —Å 10 –ø–∏–≤–∞–º–∏
                        if (!userData.balance) {
                            userData.balance = 10;
                            userRef.update({ balance: userData.balance }); // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
                        }
                        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –±–∞–ª–∞–Ω—Å
                        document.getElementById('username').innerText = `Username: ${username}`;
                        document.getElementById('balance').innerHTML = `–ë–∞–ª–∞–Ω—Å: ${userData.balance} üç∫`;
                    } else {
                        document.getElementById('username').innerText = 'Username: –ì–æ—Å—Ç—å';
                        document.getElementById('balance').innerText = '–ë–∞–ª–∞–Ω—Å: 0 üç∫';
                    }
                });
            } else {
                document.getElementById('username').innerText = 'Username: –ì–æ—Å—Ç—å'; // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                document.getElementById('balance').innerText = '–ë–∞–ª–∞–Ω—Å: 0 üç∫';
            }
        }

        // –í—ã–∑—ã–≤–∞–µ–º —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function () {
            loadUserData();
        };

        // –í—ã–∑—ã–≤–∞–µ–º —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function () {
            loadUserData();
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        function openModal(gameName) {
            const modal = document.getElementById('gameModal');
            modal.style.display = 'block';
            document.getElementById('modalContent').innerText = `–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ ${gameName}`;
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        window.onclick = function(event) {
            const modal = document.getElementById('gameModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
    </script>
</head>
<body>
<header>
    <h1>Games</h1>
    <div id="username">Username: –ì–æ—Å—Ç—å</div> <!-- –ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div id="balance">–ë–∞–ª–∞–Ω—Å: 0 üç∫</div> <!-- –ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
</header>
<main>
    <div class="slider">
        <div class="game-card" onclick="openModal('–ò–≥—Ä–∞ 1')">
            <img src="game1.jpg" alt="–ò–≥—Ä–∞ 1">
            <h3>–ò–≥—Ä–∞ 1</h3>
            <p>–ê–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä–æ–∫–∏: 10</p>
        </div>
        <div class="game-card" onclick="openModal('–ò–≥—Ä–∞ 2')">
            <img src="game2.jpg" alt="–ò–≥—Ä–∞ 2">
            <h3>–ò–≥—Ä–∞ 2</h3>
            <p>–ê–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä–æ–∫–∏: 20</p>
        </div>
        <div class="game-card" onclick="openModal('–ò–≥—Ä–∞ 3')">
            <img src="game3.jpg" alt="–ò–≥—Ä–∞ 3">
            <h3>–ò–≥—Ä–∞ 3</h3>
            <p>–ê–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä–æ–∫–∏: 5</p>
        </div>
        <div class="game-card" onclick="openModal('–ò–≥—Ä–∞ 4')">
            <img src="game4.jpg" alt="–ò–≥—Ä–∞ 4">
            <h3>–ò–≥—Ä–∞ 4</h3>
            <p>–ê–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä–æ–∫–∏: 15</p>
        </div>
    </div>
</main>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div id="gameModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <div id="modalContent"></div>
    </div>
</div>
</body>
</html>
